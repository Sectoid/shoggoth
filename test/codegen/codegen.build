<Project 
	ToolsVersion="3.5" 
	DefaultTargets="Test"
	xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

        <PropertyGroup>
		<OutDir>bin\</OutDir>
		<AssemblyName>Shoggoth.Codegen.Tests</AssemblyName>
	</PropertyGroup>

	<ItemGroup>
          <Reference Include="Shoggoth.VM.dll" />
          <Reference Include="Shoggoth.Codegen.dll" />
	</ItemGroup>
	<ItemGroup>
		<Compile Include="AssemblyInfo.cs" />
		<Compile Include="Main.cs" />
	</ItemGroup>

	<Target Name="Compile">
	   <Csc
	      Sources="@(Compile)"
	      OutputAssembly="$(OutDir)$(AssemblyName).dll"
              References="@(Reference)"
              AdditionalLibPaths="$(OutDir)"
	      TargetType="exe"
	      EmitDebugInformation="true" />
	</Target>
	<Target Name="Test" DependsOnTargets="Compile">
          <Exec Command="nunit-console2 $(AssemblyName).dll" 
                WorkingDirectory="$(OutDir)" />          
	</Target>
 
</Project>